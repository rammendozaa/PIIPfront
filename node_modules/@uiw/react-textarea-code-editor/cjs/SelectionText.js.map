{
  "version": 3,
  "sources": [
    "../src/SelectionText.ts"
  ],
  "names": [
    "SelectionText",
    "elm",
    "selectionStart",
    "selectionEnd",
    "start",
    "end",
    "value",
    "isNaN",
    "text",
    "focus",
    "setRangeText",
    "position",
    "slice",
    "charAt",
    "getLineStartNumber",
    "str",
    "getSelectedValue",
    "indent",
    "replace",
    "old",
    "oldStart",
    "insertText",
    "split",
    "map",
    "txt",
    "join",
    "length",
    "reg",
    "RegExp",
    "newStart",
    "test",
    "event",
    "Event",
    "bubbles",
    "cancelable",
    "dispatchEvent"
  ],
  "mappings": ";;;;;;;;;;;;;;;IAAaA,a;AAKX,yBAAYC,GAAZ,EAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AACpC,QAAQC,cAAR,GAAyCD,GAAzC,CAAQC,cAAR;AAAA,QAAwBC,YAAxB,GAAyCF,GAAzC,CAAwBE,YAAxB;AACA,SAAKF,GAAL,GAAWA,GAAX;AACA,SAAKG,KAAL,GAAaF,cAAb;AACA,SAAKG,GAAL,GAAWF,YAAX;AACA,SAAKG,KAAL,GAAa,KAAKL,GAAL,CAASK,KAAtB;AACD;;;;WACD,kBAASF,KAAT,EAAyBC,GAAzB,EAAuC;AACrC,sBAAyC,KAAKJ,GAA9C;AAAA,UAAQC,cAAR,aAAQA,cAAR;AAAA,UAAwBC,YAAxB,aAAwBA,YAAxB;AACA,WAAKC,KAAL,GAAa,OAAOA,KAAP,KAAiB,QAAjB,IAA6B,CAACG,KAAK,CAACH,KAAD,CAAnC,GAA6CA,KAA7C,GAAqDF,cAAlE;AACA,WAAKG,GAAL,GAAW,OAAOA,GAAP,KAAe,QAAf,IAA2B,CAACE,KAAK,CAACF,GAAD,CAAjC,GAAyCA,GAAzC,GAA+CF,YAA1D;AACA,WAAKF,GAAL,CAASC,cAAT,GAA0B,KAAKE,KAA/B;AACA,WAAKH,GAAL,CAASE,YAAT,GAAwB,KAAKE,GAA7B;AACA,aAAO,IAAP;AACD;;;WACD,oBAAWG,IAAX,EAAyB;AACvB;AACA,WAAKP,GAAL,CAASQ,KAAT;AACA,WAAKR,GAAL,CAASS,YAAT,CAAsBF,IAAtB;AACA,WAAKF,KAAL,GAAa,KAAKL,GAAL,CAASK,KAAtB;AACA,WAAKK,QAAL;AACA,aAAO,IAAP;AACD;;;WACD,0BAAiBP,KAAjB,EAAiCC,GAAjC,EAA+C;AAC7C,uBAAyC,KAAKJ,GAA9C;AAAA,UAAQC,cAAR,cAAQA,cAAR;AAAA,UAAwBC,YAAxB,cAAwBA,YAAxB;AACA,aAAO,KAAKG,KAAL,CAAWM,KAAX,CACL,OAAOR,KAAP,KAAiB,QAAjB,IAA6B,CAACG,KAAK,CAACH,KAAD,CAAnC,GAA6CA,KAA7C,GAAqDF,cADhD,EAEL,OAAOG,GAAP,KAAe,QAAf,IAA2B,CAACE,KAAK,CAACF,GAAD,CAAjC,GAAyCD,KAAzC,GAAiDD,YAF5C,CAAP;AAID;;;WACD,8BAAqB;AACnB,UAAIC,KAAK,GAAG,KAAKA,KAAjB;;AACA,aAAOA,KAAK,GAAG,CAAf,EAAkB;AAChBA,QAAAA,KAAK;;AACL,YAAI,KAAKE,KAAL,CAAWO,MAAX,CAAkBT,KAAlB,MAA6B,IAAjC,EAAuC;AACrCA,UAAAA,KAAK;AACL;AACD;AACF;;AACD,aAAOA,KAAP;AACD;AACD;;;;WACA,yBAAgB;AACd,UAAMA,KAAK,GAAG,KAAKU,kBAAL,EAAd;AACA,UAAMC,GAAG,GAAG,KAAKC,gBAAL,CAAsBZ,KAAtB,CAAZ;AACA,UAAIa,MAAM,GAAG,EAAb;AACAF,MAAAA,GAAG,CAACG,OAAJ,CAAY,UAAZ,EAAwB,UAACH,GAAD,EAAMI,GAAN;AAAA,eAAeF,MAAM,GAAGE,GAAxB;AAAA,OAAxB;AACA,aAAOF,MAAP;AACD;;;WACD,yBAAgBT,IAAhB,EAA8B;AAC5B,UAAIA,IAAJ,EAAU;AACR,YAAMY,QAAQ,GAAG,KAAKhB,KAAtB;AACA,YAAMA,KAAK,GAAG,KAAKU,kBAAL,EAAd;AACA,YAAMC,GAAG,GAAG,KAAKC,gBAAL,CAAsBZ,KAAtB,CAAZ;AACA,aAAKO,QAAL,CAAcP,KAAd,EAAqB,KAAKC,GAA1B,EACGgB,UADH,CAEIN,GAAG,CACAO,KADH,CACS,IADT,EAEGC,GAFH,CAEO,UAACC,GAAD;AAAA,iBAAShB,IAAI,GAAGgB,GAAhB;AAAA,SAFP,EAGGC,IAHH,CAGQ,IAHR,CAFJ,EAOGd,QAPH,CAOYS,QAAQ,GAAGZ,IAAI,CAACkB,MAP5B,EAOoC,KAAKrB,GAPzC;AAQD;;AACD,aAAO,IAAP;AACD;;;WACD,wBAAeG,IAAf,EAA6B;AAC3B,UAAIA,IAAJ,EAAU;AACR,YAAMY,QAAQ,GAAG,KAAKhB,KAAtB;AACA,YAAMA,KAAK,GAAG,KAAKU,kBAAL,EAAd;AACA,YAAMC,GAAG,GAAG,KAAKC,gBAAL,CAAsBZ,KAAtB,CAAZ;AACA,YAAMuB,GAAG,GAAG,IAAIC,MAAJ,YAAepB,IAAf,GAAuB,GAAvB,CAAZ;AACA,YAAIqB,QAAQ,GAAGT,QAAQ,GAAGZ,IAAI,CAACkB,MAA/B;;AACA,YAAI,CAACC,GAAG,CAACG,IAAJ,CAASf,GAAT,CAAL,EAAoB;AAClBc,UAAAA,QAAQ,GAAGT,QAAX;AACD;;AACD,aAAKT,QAAL,CAAcP,KAAd,EAAqB,KAAKC,GAA1B,EACGgB,UADH,CAEIN,GAAG,CACAO,KADH,CACS,IADT,EAEGC,GAFH,CAEO,UAACC,GAAD;AAAA,iBAASA,GAAG,CAACN,OAAJ,CAAYS,GAAZ,EAAiB,EAAjB,CAAT;AAAA,SAFP,EAGGF,IAHH,CAGQ,IAHR,CAFJ,EAOGd,QAPH,CAOYkB,QAPZ,EAOsB,KAAKxB,GAP3B;AAQD;AACF;AACD;;;;WACA,wBAAe;AACb,UAAM0B,KAAK,GAAG,IAAIC,KAAJ,CAAU,OAAV,EAAmB;AAAEC,QAAAA,OAAO,EAAE,IAAX;AAAiBC,QAAAA,UAAU,EAAE;AAA7B,OAAnB,CAAd;AACA,WAAKjC,GAAL,CAASkC,aAAT,CAAuBJ,KAAvB;AACD",
  "sourcesContent": [
    "export class SelectionText {\n  elm: HTMLTextAreaElement;\n  start: number;\n  end: number;\n  value: string;\n  constructor(elm: HTMLTextAreaElement) {\n    const { selectionStart, selectionEnd } = elm;\n    this.elm = elm;\n    this.start = selectionStart;\n    this.end = selectionEnd;\n    this.value = this.elm.value;\n  }\n  position(start?: number, end?: number) {\n    const { selectionStart, selectionEnd } = this.elm;\n    this.start = typeof start === 'number' && !isNaN(start) ? start : selectionStart;\n    this.end = typeof end === 'number' && !isNaN(end) ? end : selectionEnd;\n    this.elm.selectionStart = this.start;\n    this.elm.selectionEnd = this.end;\n    return this;\n  }\n  insertText(text: string) {\n    // Most of the used APIs only work with the field selected\n    this.elm.focus();\n    this.elm.setRangeText(text);\n    this.value = this.elm.value;\n    this.position();\n    return this;\n  }\n  getSelectedValue(start?: number, end?: number) {\n    const { selectionStart, selectionEnd } = this.elm;\n    return this.value.slice(\n      typeof start === 'number' && !isNaN(start) ? start : selectionStart,\n      typeof end === 'number' && !isNaN(end) ? start : selectionEnd,\n    );\n  }\n  getLineStartNumber() {\n    let start = this.start;\n    while (start > 0) {\n      start--;\n      if (this.value.charAt(start) === '\\n') {\n        start++;\n        break;\n      }\n    }\n    return start;\n  }\n  /** Indent on new lines */\n  getIndentText() {\n    const start = this.getLineStartNumber();\n    const str = this.getSelectedValue(start);\n    let indent = '';\n    str.replace(/(^(\\s)+)/, (str, old) => (indent = old));\n    return indent;\n  }\n  lineStarInstert(text: string) {\n    if (text) {\n      const oldStart = this.start;\n      const start = this.getLineStartNumber();\n      const str = this.getSelectedValue(start);\n      this.position(start, this.end)\n        .insertText(\n          str\n            .split('\\n')\n            .map((txt) => text + txt)\n            .join('\\n'),\n        )\n        .position(oldStart + text.length, this.end);\n    }\n    return this;\n  }\n  lineStarRemove(text: string) {\n    if (text) {\n      const oldStart = this.start;\n      const start = this.getLineStartNumber();\n      const str = this.getSelectedValue(start);\n      const reg = new RegExp(`^${text}`, 'g');\n      let newStart = oldStart - text.length;\n      if (!reg.test(str)) {\n        newStart = oldStart;\n      }\n      this.position(start, this.end)\n        .insertText(\n          str\n            .split('\\n')\n            .map((txt) => txt.replace(reg, ''))\n            .join('\\n'),\n        )\n        .position(newStart, this.end);\n    }\n  }\n  /** Notify any possible listeners of the change */\n  notifyChange() {\n    const event = new Event('input', { bubbles: true, cancelable: false });\n    this.elm.dispatchEvent(event);\n  }\n}\n"
  ]
}